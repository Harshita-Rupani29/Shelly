# Pre-push hook: Run tests and validations before pushing
echo "ğŸš€ Running pre-push validations..."

# Run type checking if TypeScript is available
if [ -f "tsconfig.json" ]; then
  echo "ğŸ“˜ Type checking..."
  npx tsc --noEmit || exit 1
fi

# Run tests if available
if grep -qE '"test"\s*:' package.json 2>/dev/null; then
  echo "ğŸ§ª Running tests..."
  npm test || exit 1
fi

# Run build validation if script is available
if [ -f "scripts/build-validations.cjs" ]; then
  echo "ğŸ” Running build validations..."
  node scripts/build-validations.cjs || exit 1
fi

echo "âœ… Pre-push validations passed!"
